<!DOCTYPE html>
<html>
	<head>
		<title>Demo</title>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- <link rel="stylesheet" href="leaflet-0.7.7-patch/leaflet.css" /> -->
		<!-- <script type="text/javascript" src="leaflet-0.7.7-patch/leaflet-src.js"></script> -->
		<link rel="stylesheet" href="https://unpkg.com/leaflet@0.7.7/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@0.7.7/dist/leaflet.js"></script>
		<!-- Leaflet Labels -->
		<link href="Leaflet.label/dist/leaflet.label.css" rel="stylesheet" />
		<script src="Leaflet.label/dist/leaflet.label.js"></script>
		<script src="https://d3js.org/d3.v4.js"></script>
		<style>
			#map {
				position: absolute; 
				top: 0; 
				left: 0;
				width: 100%;
				height: 100%;
			}
		</style>
	</head>
	<body>
		<div id="map"></div>
	</body>
	<link rel="stylesheet" href='L.AnimationSvgMarker.css' />		
	<script src='L.AnimationSvgMarker.js'></script>
	<script>
		var map, marker;

		document.addEventListener('DOMContentLoaded', function() {
		   init();
		});

		function init() {

			var defaultLayer =  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',
				reuseTiles: true
			});

			var baseLayers = { 
				"OpenStreetMap": L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
					attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',
					reuseTiles: true
				}),
				"Esri_DarkGrey": L.tileLayer('https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}', {
					attribution: 'Esri, HERE, DeLorme, MapmyIndia, Â© OpenStreetMap contributors, and the GIS user community',
					reuseTiles: true,
					maxZoom: 16
				})
			}

			map = L.map('map',{
				maxZoom:20,
				layers: [
					defaultLayer
				]
			}).setView([0,0], 2)

			marker = L.animationsvgmarker(map.getCenter(), {
				timestamp: new Date().getTime()
			});

			setTimeout(function(){
				marker.addToFadeIn(map);
				marker.moveTo(L.latLng(20, 20), 1000, new Date().getTime());
				marker.moveTo(L.latLng(-20, 40), 2000, new Date().getTime());
				marker.moveTo(L.latLng(30, -30), 5000, new Date().getTime());
				marker.moveTo(L.latLng(-15, -10), 2000, new Date().getTime());
				marker.moveTo(map.getCenter(), 500);
				setTimeout(function(){
					// marker.updateLabel("stefan rocks");
					marker.changeColor("purple");
					setTimeout(function(){
						marker.changeColor("yellow");
						setTimeout(function(){
							marker.changeColor("darkred");
							setTimeout(function(){
								marker.removeFadeOut();
							}, 3000);
						}, 3000);
					}, 3000);
				}, 3000);
			}, 1250);

		}

	</script>	
</html>

